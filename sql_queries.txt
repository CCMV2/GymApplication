CREATE SCHEMA `gymapp` ;

DROP TABLE if exists `gymapp`.`workoutlist`;
DROP TABLE if exists `gymapp`.`user_has_workout`;
DROP TABLE if exists `gymapp`.`timetable`;
DROP TABLE if exists `gymapp`.`room`;
DROP TABLE if exists `gymapp`.`workout`;
DROP TABLE if exists `gymapp`.`users`;
DROP TABLE if exists `gymapp`.`subscription`;

 CREATE TABLE `gymapp`.`subscription` (
  `idSubscription` bigint NOT NULL AUTO_INCREMENT,
  `Name` VARCHAR(100) NOT NULL,
  `Price` DECIMAL(2,2) NOT NULL,
  `Start` DATE NULL,
  `Duration` INT NULL,
  PRIMARY KEY (`idSubscription`));

CREATE TABLE `gymapp`.`user` (
  `idUser` bigint NOT NULL AUTO_INCREMENT,
	`Passw` VARCHAR(100) NOT NULL,
	`Type` VARCHAR(100) NULL,
	`Email` VARCHAR(100) NULL,
	`Name` VARCHAR(100) NOT NULL,
	`Surname` VARCHAR(100) NOT NULL,
	`PhoneNr` VARCHAR(45) NULL,
	`idSubscription` bigint NOT NULL,
 PRIMARY KEY (`idUser`),
 FOREIGN KEY (`idSubscription`) REFERENCES subscription(`idSubscription`));
  
  
  CREATE TABLE `gymapp`.`workout` (
  `idWorkout` bigint NOT NULL AUTO_INCREMENT,
  `WorkoutType` VARCHAR(100) NOT NULL,
  `Difficulty` VARCHAR(45) NULL,
  `Desc` VARCHAR(100) NULL,
  PRIMARY KEY (`idWorkout`));
  

CREATE TABLE `gymapp`.`room` (
  `idRoom` bigint NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(45),
  PRIMARY KEY (`idRoom`));


  CREATE TABLE `gymapp`.`timetable` (
  `idTimetable` bigint NOT NULL AUTO_INCREMENT,
  `idWorkout` bigint NOT NULL,
  `Day` VARCHAR(100) NOT NULL,
  `Start` VARCHAR(45) NULL,
  `Duration` VARCHAR(45) NULL,
  `idRoom` bigint NOT NULL,
  PRIMARY KEY (`idTimetable`),
  FOREIGN KEY (`idRoom`) REFERENCES room(`idRoom`));
  
   CREATE TABLE `gymapp`.`user_has_workout` (
  `id` bigint NOT NULL,
  `idUser` bigint NOT NULL,
  `idWorkout` bigint NOT NULL,
  PRIMARY KEY (`id`),
  FOREIGN KEY (`idUser`) REFERENCES users(`idUser`),
  FOREIGN KEY (`idWorkout`) REFERENCES workout(`idWorkout`));
  
  CREATE TABLE `gymapp`.`workoutlist` (
  `id` bigint NOT NULL,
  `idSubscription` bigint NOT NULL,
  `idWorkout` bigint NOT NULL,
  PRIMARY KEY (`id`),
  FOREIGN KEY (`idSubscription`) REFERENCES subscription(`idSubscription`),
  FOREIGN KEY (`idWorkout`) REFERENCES workout(`idWorkout`));


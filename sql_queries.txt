CREATE SCHEMA `gymapp` ;

DROP TABLE if exists `gymapp`.`workoutlist`;
DROP TABLE if exists `gymapp`.`user_has_workout`;
DROP TABLE if exists `gymapp`.`timetable`;
DROP TABLE if exists `gymapp`.`room`;
DROP TABLE if exists `gymapp`.`workout`;
DROP TABLE if exists `gymapp`.`users`;
DROP TABLE if exists `gymapp`.`subscription`;

 CREATE TABLE `gymapp`.`subscription` (
  `idSubscription` bigint NOT NULL AUTO_INCREMENT,
  `Name` VARCHAR(100) NOT NULL,
  `Price` DECIMAL(2,2) NOT NULL,
  `Availability` VARCHAR(100) NULL,
  `Start` DATE NULL,
  PRIMARY KEY (`idSubscription`));

CREATE TABLE `gymapp`.`users` (
  `idUser` bigint NOT NULL AUTO_INCREMENT,
	`Passw` VARCHAR(100) NOT NULL,
	`Type` VARCHAR(100) NULL,
	`Email` VARCHAR(100) NULL,
	`Name` VARCHAR(100) NOT NULL,
	`Surname` VARCHAR(100) NOT NULL,
	`PhoneNr` VARCHAR(45) NULL,
	`PassID` bigint NOT NULL,
 PRIMARY KEY (`idUser`),
 FOREIGN KEY (`PassID`) REFERENCES subscription(`idSubscription`));
  
  
  CREATE TABLE `gymapp`.`workout` (
  `idWorkout` bigint NOT NULL AUTO_INCREMENT,
  `WorkoutType` VARCHAR(100) NOT NULL,
  `Difficulty` VARCHAR(45) NULL,
  `Desc` VARCHAR(100) NULL,
  PRIMARY KEY (`idWorkout`));
  

CREATE TABLE `gymapp`.`room` (
  `idroom` bigint NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(45),
  PRIMARY KEY (`idroom`));


  CREATE TABLE `gymapp`.`timetable` (
  `idTimetable` bigint NOT NULL AUTO_INCREMENT,
  `idWorkout` bigint NOT NULL,
  `Day` VARCHAR(100) NOT NULL,
  `Start` VARCHAR(45) NULL,
  `Duration` VARCHAR(45) NULL,
  `room_idroom` bigint NOT NULL,
  PRIMARY KEY (`idTimetable`),
  FOREIGN KEY (`room_idroom`) REFERENCES room(`idroom`));
  
   CREATE TABLE `gymapp`.`user_has_workout` (
  `user_idUser` bigint NOT NULL,
  `workout_idWorkout` bigint NOT NULL,
  PRIMARY KEY (`user_idUser`, `workout_idWorkout`),
  FOREIGN KEY (`user_idUser`) REFERENCES users(`idUser`),
  FOREIGN KEY (`workout_idWorkout`) REFERENCES workout(`idWorkout`));
  
  CREATE TABLE `gymapp`.`workoutlist` (
  `idPass` bigint NOT NULL,
  `idWorkout` bigint NOT NULL,
  PRIMARY KEY (`idPass`, `idWorkout`),
  FOREIGN KEY (`idPass`) REFERENCES subscription(`idSubscription`),
  FOREIGN KEY (`idWorkout`) REFERENCES workout(`idWorkout`));

